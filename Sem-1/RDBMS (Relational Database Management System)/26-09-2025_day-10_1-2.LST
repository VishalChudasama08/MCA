
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> -- pl-sql block
SQL> 
SQL> set serveroutput on;
SQL> -- without this command output not showing
SQL> 
SQL> declare
  2      i number;
  3  begin
  4      dbms_output.put_line('variable i value is ' || i);
  5  end;
  6  /
variable i value is                                                                                                                                                                                     

PL/SQL procedure successfully completed.

SQL> select * from student1;
select * from student1
              *
ERROR at line 1:
ORA-00942: table or view does not exist 


SQL> select * from student;

    ROLLNO FNAME        LNAME        DOB                                                                                                                                                                
---------- ------------ ------------ ---------                                                                                                                                                          
        11 Kapil        Sharma       01-JAN-03                                                                                                                                                          
        12 Anjali       Verma        21-JUN-02                                                                                                                                                          
        13 Ravi         Kumar        12-MAR-04                                                                                                                                                          
        14 Pooja        Singh        23-NOV-01                                                                                                                                                          

SQL> select count(*) from student;

  COUNT(*)                                                                                                                                                                                              
----------                                                                                                                                                                                              
         4                                                                                                                                                                                              

SQL> -- now this by pl-sql
SQL> declare
  2      n number;
  3  begin
  4      select count(*) into n from student;
  5      dbms_output.put_line('Total row in student table is ' || n);
  6  end;
  7  /
Total row in student table is 4                                                                                                                                                                         

PL/SQL procedure successfully completed.

SQL> ed
Wrote file afiedt.buf

  1  declare
  2      n number;
  3  begin
  4      select count(*) into n from student;
  5      dbms_output.put_line('Total row in student table is ' || n);
  6* end;
SQL> 
SQL> 
SQL> -- day-10
SQL> select * from PRODUCTS;

P_NO  PROFIT_PER UNIT         QTY_HAND   RE_ORDER     SELL_P     COST_P                                                                                                                                 
----- ---------- ---------- ---------- ---------- ---------- ----------                                                                                                                                 
P003           6 PIECE             100         50        350        200                                                                                                                                 
P004           3 PIECE             100         20        820        600                                                                                                                                 

SQL> select * from PRODUCT;

   PROD_ID PROD_NAME            SUPPLIER_ID     CAT_ID UNIT            PRICE                                                                                                                            
---------- -------------------- ----------- ---------- ---------- ----------                                                                                                                            
         1 Product 1                    101          1 Piece             100                                                                                                                            
         2 Product 2                    102          2 Box                20                                                                                                                            
         3 Product 3                    103          3 Pack               30                                                                                                                            
         4 Product 4                    104          1 Bag                15                                                                                                                            

SQL> select * from ORDER_DETAILS;

ORDERDETAIL_ID   ORDER_ID    PROD_ID   QUANTITY                                                                                                                                                         
-------------- ---------- ---------- ----------                                                                                                                                                         
             1          3          1         10                                                                                                                                                         
             2          3          2          5                                                                                                                                                         
             3          3          3          3                                                                                                                                                         

SQL> -- 1. Write a PLSQL block to display total number of products ordered in Order_ID = 3
SQL> begin
  2      select count(prod_name) from ORDER_DETAILS where ORDER_ID=3;
  3  end;
  4  /
    select count(prod_name) from ORDER_DETAILS where ORDER_ID=3;
                 *
ERROR at line 2:
ORA-06550: line 2, column 18: 
PL/SQL: ORA-00904: "PROD_NAME": invalid identifier 
ORA-06550: line 2, column 5: 
PL/SQL: SQL Statement ignored 


SQL> ed
Wrote file afiedt.buf

  1  begin
  2      select count(Order_ID) from ORDER_DETAILS where ORDER_ID=3;
  3* end;
SQL> /
    select count(Order_ID) from ORDER_DETAILS where ORDER_ID=3;
    *
ERROR at line 2:
ORA-06550: line 2, column 5: 
PLS-00428: an INTO clause is expected in this SELECT statement 


SQL> declare
  2      n number;
  3  begin
  4      select count(Order_ID) into n from ORDER_DETAILS where ORDER_ID=3;
  5      dbms_output.put_line('total number of products ordered in Order_ID = 3 is :- ' || n);
  6  end;
  7  /
total number of products ordered in Order_ID = 3 is :- 3                                                                                                                                                

PL/SQL procedure successfully completed.

SQL> -- 2. Write a PLSQL block to update the price (actual price + 5) of product with Id = 2
SQL> begin
  2      update PRODUCT set PRICE=PRICE+5 where PROD_ID=2;
  3  end;
  4  /

PL/SQL procedure successfully completed.

SQL> select * from product;

   PROD_ID PROD_NAME            SUPPLIER_ID     CAT_ID UNIT            PRICE                                                                                                                            
---------- -------------------- ----------- ---------- ---------- ----------                                                                                                                            
         1 Product 1                    101          1 Piece             100                                                                                                                            
         2 Product 2                    102          2 Box                25                                                                                                                            
         3 Product 3                    103          3 Pack               30                                                                                                                            
         4 Product 4                    104          1 Bag                15                                                                                                                            

SQL> -- 3. Write a PLSQL block to delete the products of Cat_Id = 3
SQL> begin
  2      delete from product where CAT_ID=3;
  3  end;
  4  /
begin
*
ERROR at line 1:
ORA-02292: integrity constraint (MCAB250013.SYS_C0048692) violated - child record found 
ORA-06512: at line 2 


SQL> alter table product drop constraints SYS_C0048692;
alter table product drop constraints SYS_C0048692
                                     *
ERROR at line 1:
ORA-02443: Cannot drop constraint  - nonexistent constraint 


SQL> alter table product drop constraints MCAB250013.SYS_C0048692;
alter table product drop constraints MCAB250013.SYS_C0048692
                                               *
ERROR at line 1:
ORA-01735: invalid ALTER TABLE option 


SQL> ALTER TABLE product DROP CONSTRAINT SYS_C0048692;
ALTER TABLE product DROP CONSTRAINT SYS_C0048692
                                    *
ERROR at line 1:
ORA-02443: Cannot drop constraint  - nonexistent constraint 


SQL> SELECT CONSTRAINT_NAME, CONSTRAINT_TYPE, TABLE_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'PRODUCT' AND CONSTRAINT_TYPE = 'R';

no rows selected

SQL> SELECT CONSTRAINT_NAME, CONSTRAINT_TYPE, TABLE_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'PRODUCT';

CONSTRAINT_NAME                C TABLE_NAME                                                                                                                                                             
------------------------------ - ------------------------------                                                                                                                                         
SYS_C0048687                   P PRODUCT                                                                                                                                                                

SQL> 
